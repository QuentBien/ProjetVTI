<!doctype html>

<head>
    <title>
        <%= tagline %>
    </title>
    <% include /partials/head %>
</head>
<html>
<body style="background:whitesmoke;">
<div id="demo-toast-example" class="mdl-js-snackbar mdl-snackbar">
  <div class="mdl-snackbar__text"></div>
  <button class="mdl-snackbar__action" type="button"></button>
</div>
<section style="padding-left:50px;padding-right:50px">
        <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored button-ajout" onclick="showAjoutForm()">
            <i class="material-icons">add</i>
        </button>
<h1>Films :</h1>
<dialog class="mdl-dialog" id="form-delete" style="width:450px;display:none">
    <h4 class="mdl-dialog__title">Supprimer le film ?</h4>
    <div class="mdl-dialog__content">
      <p id="diag"></p>
    </div>
    <div class="mdl-dialog__actions">
      <button id="confirm" type="button" class="mdl-button">Confirmer</button>
      <button id="cancel" type="button" class="mdl-button close">Annuler</button>
    </div>
  </dialog>

          <!-- FORMULAIRE AJOUT -->

          <dialog class="mdl-dialog" id="form-ajout" style="width:50%;display:none;">
              <h4 class="mdl-dialog__title">Ajouter un film</h4>
              <div class="mdl-dialog__content">
                  <p id="diag"></p>
                  <form id="formAddFilm" name="addfilm" action="/films" method="post">
                      <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                          <input class="mdl-textfield__input" id="inputTitle" type="text" name="title" required="required">
                          <label class="mdl-textfield__label" for="inputTitle">Titre</label>
                      </div>


                      <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                          <input class="mdl-textfield__input" id="inputAnnee" type="text" pattern="\d{4}" name="year" required="required">
                          <label class="mdl-textfield__label" for="inputAnnee">Année</label>
                          <span class="mdl-textfield__error">Oush, saisie une année sinon j'ai le seum !</span>
                      </div>

                      <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                          <input class="mdl-textfield__input" id="inputGenre" type="text" name="genre" required="required">
                          <label class="mdl-textfield__label" for="inputGenre">Genre</label>
                      </div>

                      <br/>

                      <div class="mdl-textfield mdl-js-textfield">
                          <textarea class="mdl-textfield__input" id="inputSummary" name="resume" cols="200" rows="5"></textarea>
                          <label class="mdl-textfield__label" for="inputSummary">Résumé</label>
                      </div>

                      <br/>

                      <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                          <input class="mdl-textfield__input" id="inputNationalite" type="text" name="nationalite" required>
                          <label class="mdl-textfield__label" for="inputNationalite">Nationalite</label>
                      </div>

                      <h4> Directeur </h4>

                      <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                          <input class="mdl-textfield__input" id="inputDNom" type="text" name="directorLastname" required>
                          <label class="mdl-textfield__label" for="inputDNom">Nom</label>
                      </div>

                      <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                          <input class="mdl-textfield__input" id="inputDPrenom" type="text" name="directorFirstname" required>
                          <label class="mdl-textfield__label" for="inputDPrenom">Prenom</label>
                      </div>

                      <br/>

                      <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                          <input class="mdl-textfield__input" id="inputDDdn" type="text" pattern="(0[1-9]|1[0-9]|2[0-9]|3[01])/(0[1-9]|1[012])/[0-9]{4}"
                              name="directorBirth_date" required>
                          <label class="mdl-textfield__label" for="inputDDdn">Date de naissance</label>
                      </div>

                      <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                          <input class="mdl-textfield__input" id="inputDRole" type="text" name="directorRole" required>
                          <label class="mdl-textfield__label" for="inputDRole">Role</label>
                      </div>

                      <h4> Acteurs </h4>

                      <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                          <input class="mdl-textfield__input" id="inputActorsList" type="text" name="actorsList">
                          <label class="mdl-textfield__label" for="inputActorsList">Acteurs (noms séparés par un ;)</label>
                      </div>
                      <br/>
                  </form>
              </div>
              <div class="mdl-dialog__actions">
                  <button id="confirm-ajout" type="button" class="mdl-button">Confirmer</button>
                  <button id="cancel-ajout" type="button" class="mdl-button close">Annuler</button>
              </div>
          </dialog>

          <!-- FIN FORMULAIRE AJOUT -->
<div id="flexbox" class="flexbox" style="display:flex;flex-wrap:wrap;justify-content: space-around;justify-content: center;">
    <% films.forEach(function(film) { %>
	<div id="<%= film._id %>" class="mdl-card mdl-shadow--2dp" style="width:450px;height:450px;display:inline-block;margin-bottom:20px;margin-left:20px">
        <br>
        <button id="del<%= film._id %>" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent mdl-button--icon" onclick="showDeleteModal(<%= JSON.stringify(film._id) %>, <%= JSON.stringify(film.title) %>)" style="float:right;display:inline-block;margin-left:10px;margin-right:10px"><i class="material-icons">delete</i></button>
        <div class="mdl-tooltip" data-mdl-for="del<%= film._id %>">Supprimer le film</div>
        <button id="ed<%= film._id %>" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent mdl-button--icon" onclick="" style="float:right;display:inline-block;"><i class="material-icons">edit</i></button>	
        <div class="mdl-tooltip" data-mdl-for="ed<%= film._id %>">Editer le film</div>
        <div class="mdl-card__title" style="display:block;padding-bottom:0;">
            <h2 class="mdl-card__title-text"><%= film.title %></h2>
            <em class="mdl-card__subtitle-text">R&eacute;alis&eacute; par <%= film.director.first_name %> <%= film.director.last_name %> (<%= film.year %>, <%= film.country %>), <%= film.genre %></em>   
        </div>
        <div class="mdl-card__supporting-text" style="display:flex;flex-direction: column;justify-content: space-around;">        
            <strong>Acteurs</strong>
            <p>
                <%  var i= 0;
                    film.actors.forEach(function(actor) { i++; %>
                    <%= actor.first_name %> <%= actor.last_name %><% if(i<film.actors.length){%>, <%} 
             }); %></p>
            <strong>Synopsis</strong>              
            <p style="overflow-y:auto;height:250px;"><%= film.summary %></p>
        </div>
    </div>
    <% }); %>
</div>
</section>
</body>

</html>